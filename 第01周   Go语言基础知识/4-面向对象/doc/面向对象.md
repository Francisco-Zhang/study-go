

## 1、结构体和方法

### 面向对象

- go语言仅支持封装，不支持继承和多态。
- go 语言没有class，只有struct

### 结构的创建

```go
type treeNode struct {
	value       int
	left, right *treeNode
}

func main() {
	//定义方式一
	var root treeNode //会进行初始化
	//方式二
	root = treeNode{value: 3}
	//方式三
	root.left = &treeNode{}
	//方式四
	root.right = &treeNode{5, nil, nil}
	//方式五  new是内置函数，返回值就是地址
	root.right.left = new(treeNode)

	nodes := []treeNode{
		{value: 2},
		{},
		{6, nil, &root},
	}
}
```

- 不论地址还是结构本身，一律使用 **.** 来访问成员。



```go
func createNode(value int) *treeNode {
	return &treeNode{value: value} //返回局部变量的地址，在c++中是非常典型的错误。go语言可以正常使用。
}
root.left = createNode(4)
```

- 使用自定义工厂函数，自己控制构建
- 注意返回了局部变量的地址！



### 结构是创建在堆上还是栈上？

答案是	不需要知道。有可能是栈上，也有可能堆上。当发现有return时，需要将变量返回，会分配到堆上，由垃圾回收器负责管理。

